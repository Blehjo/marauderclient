import{useMemo as t,useCallback as r,useState as e,useEffect as n}from"react";import{range as i}from"../utils/numbers";export const DOTS="dots";export default({page:o,total:a,siblings:s=1,boundaries:u=1,initialPage:l=1,onChange:c})=>{const[f,m]=e(o||l),g=t((()=>void 0!==o),[o]);n((()=>{o&&o!==f&&m(o)}),[o,f]);const p=r((t=>{g||m(t),null==c||c(t)}),[m,c,g]),D=r((t=>{p(t<=0?1:t>a?a:t)}),[p,a]);return{range:t((()=>{if(2*s+3+2*u>=a)return i(1,a);const t=Math.max(f-s,u),r=Math.min(f+s,a-u),e=t>u+2,n=r<a-(u+1);if(!e&&n){return[...i(1,2*s+u+2),DOTS,...i(a-(u-1),a)]}if(e&&!n){const t=u+1+2*s;return[...i(1,u),DOTS,...i(a-t,a)]}return[...i(1,u),DOTS,...i(t,r),DOTS,...i(a-u+1,a)]}),[a,s,f]),active:f,setPage:D,next:()=>D(f+1),previous:()=>D(f-1),first:()=>D(1),last:()=>D(a)}};